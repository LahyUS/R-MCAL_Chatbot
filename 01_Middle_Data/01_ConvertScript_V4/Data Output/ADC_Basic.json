{"page": [], "level": [], "name": [], "paragraph": [["ADC conversion methods"], ["\u00e2\u20ac\u00a2 Flash conversion"], ["\u00e2\u20ac\u00a2 Successive approximation conversion"], ["\u00e2\u20ac\u00a2 Delta-Encoded Conversion"], ["Successive approximation conversion circuit"], ["\u00e2\u20ac\u00a2 Sample and hold circuit: capture analog waveform using capacitor. Analog signal is input and within controlled/set amount of clock cycles, input signal will be captured and circuit connected to input signal shall be opened simultaneously."], ["\u00e2\u20ac\u00a2 DAC: digital to analog converter"], ["\u00e2\u20ac\u00a2 Comparator: compare analog input signal and DAC output signal"], ["\u00e2\u20ac\u00a2 Successive approximation register: provide discrete bit signal to DAC, these discrete bits are also ADC converted data."], ["Basic concepts of ADC in AUTOSAR"], ["\u00e2\u20ac\u00a2 Channel: an ADC channel is used to convert analog signal, an ADC channel is connected to 1 input physical pin. In RVC, one input physical port pin can be connected to only 1 ADC physical channel, however, there is multiplexer within ADC that allows it to connect multiple ADC channel to more than one physical pins."], ["\u00e2\u20ac\u00a2 Group: a group contains one or multiple ADC channels and is the target to start an A/D conversion. A group is configured to run in 1 specific mode and is not changed throughout the life cycle of an ADC software (hard configured). Multiple groups can be used by ADC, though only one group is allowed to be converted at one specific time per ADC hardware."], ["Configuration of an ADC group"], ["There are 3 major parameters that are considered group mode and cannot be changed within the runtime of ADC software (hard configured)."], ["\u00e2\u20ac\u00a2 Trigger type: or trigger source of ADC, is the method to start the A/D conversion."], ["\u00e2\u20ac\u00a2 Scan modes: whether A/D conversion will be executed for a continuously or just once."], ["\u00e2\u20ac\u00a2 Buffer modes: how converted data will be written to software setup-buffer. This configuration along with scan modes will be used to decide whether group will convert for a desired number of times (implicitly stopped) or non-stop (non-implicitly stopped)."], ["Scan modes \u00e2\u20ac\u201c How ADC hardware handles conversion request"], ["AUTOSAR defines 2 scan modes for A/D conversion. Scan mode is"], ["\u00e2\u20ac\u00a2 One-shot: Upon ADC receives conversion request (either hardware or software trigger), ADC will execute one conversion for requested group. This is the only scan mode available for hardware trigger, though it is available for both trigger types of ADC."], ["\u00e2\u20ac\u00a2 Continuous: Upon calling of software trigger API, A/D conversion will be executed multiple time or non-stop. ADC will automatically start the A/D conversion for a specific number of conversions and/or until configured group is requested to be stopped by user. Continuous scan mode is available for software trigger only."], ["Buffer modes \u00e2\u20ac\u201c How converted data is written to software buffer"], ["AUTOSAR defines 2 buffer modes for A/D conversion"], ["\u00e2\u20ac\u00a2 Single buffer: configured buffer for group must be ensured that there is enough area to store one sample of A/D conversion for such group \u00e2\u20ac\u201c which contains multiple channel data."], ["\u00e2\u20ac\u00a2 Streaming buffer: configured buffer for group must be ensured that there is enough area to store all sample of A/D conversion for such group. For instance, m is the number of samples, n is the number of channels belong to said group, streaming buffer area must be ensured to be able to store at least m * n channel converted data. There are linear and circular streaming buffer types."], ["\u00e2\u20ac\u00a2 Circular: group run non-stop until it is requested to be stopped."], ["\u00e2\u20ac\u00a2 Linear: group will be automatically stopped after a certain conversion times."], ["Refer AUTOSAR for how converted data shall be written to setup-buffer"], ["ADC all group configuration combinations"], ["\u00e2\u2014\u2020 There are 7 settings combinations for ADC channel groups defined by AUTOSAR"], ["\u00e2\u20ac\u00a2 SW trigger, one-shot, single access mode (Implicitly-stopped)"], ["\u00e2\u20ac\u00a2 SW trigger, continuous, single access mode"], ["\u00e2\u20ac\u00a2 SW trigger, continuous, linear-streaming access mode (Implicitly-stopped)"], ["\u00e2\u20ac\u00a2 SW trigger, continuous, circular-streaming access mode"], ["\u00e2\u20ac\u00a2 HW trigger, one-shot, single access mode"], ["\u00e2\u20ac\u00a2 HW trigger, one-shot, linear-streaming access mode (Implicitly-stopped)"], ["\u00e2\u20ac\u00a2 HW trigger, one-shot, circular-streaming access mode"], ["Group status"], ["\u00e2\u20ac\u00a2 ADC_IDLE: group is not started or hardware trigger is not enabled for such group."], ["\u00e2\u20ac\u00a2 ADC_BUSY: group is under-conversion or waiting for hardware trigger to start the conversion, no sample has been completed with conversion."], ["\u00e2\u20ac\u00a2 ADC_COMPLETED: one or more but not all samples are completed for such group. Group in this state is still under-conversion by ADC but data is already available to be read by user."], ["\u00e2\u20ac\u00a2 ADC_STREAM_COMPLETED: group in this state has completed all configured samples (or maybe more if it is non-implicitly stopped group). Group in this state can either stops converting if it is implicitly stopped or keep the conversion going if it is a non- implicitly stopped one. Data is available to be read."], ["Implicitly stopped and non-implicitly stopped group"], ["\u00e2\u20ac\u00a2 Implicitly stopped: these groups will be automatically stopped when it finished its conversion (group status become ADC_STREAM_COMPLETED), without the need of calling for related API. When such group is finished, other pending/in-queue group can be resumed automatically. Said groups will always be converted with configured samples and no more."], ["\u00e2\u20ac\u00a2 Non-implicitly stopped: these groups will always be under-conversion/waiting for hardware trigger or waiting in queue until Adc_StopGroupConversion (software triggered group) or Adc_DisableHardwareTrigger (hardware triggered group) must be called in order to stop the conversion of such groups. After group status becomes ADC_STREAM_COMPLETED, its status will be kept in this state if Adc_ReadGroup is not called and converted data will still be written to group\u00e2\u20ac\u2122s setup-buffer restarted from the first sample."], ["Queue"], ["There are 2 queue types available"], ["\u00e2\u20ac\u00a2 Hardware queue: queue that is supported by hardware only, group(s) in this queue will automatically be resumed/restarted by hardware when either ADC finishes conversion of under-conversion group or said group is stopped manually due to the calls of related APIs. Hardware queue can contain both software triggered and hardware triggered groups."], ["\u00e2\u20ac\u00a2 Software queue: queue that is supported by software only and also contains software- triggered group(s) only. This queue will function the same as hardware queue, except the fact that software needs to take part in the process of starting groups that are in software queue."], ["Note: queue can be either be sorted by priority of groups or will be the first-come-first- serve queue."], ["Handling of error in ADC"], ["AUTOSAR only defines one type of error in ADC and how it must be handled, other error types may be supported however and process of handling such error can be varied."], ["\u00e2\u20ac\u00a2 Limit check should be supported by ADC, by either software or hardware built-in function. Limit check is enabled for individual group as well as the range check can also be configured. When a specific group uses limit check, only one channel is allowed to be configured for such group (group that used limit check must not have more than one channel)."], ["\u00e2\u20ac\u00a2 Upon the occurrence of error in group sample, said sample will be ignored (converted data will not be written to setup-buffer) and error notification function will be called if configured. Software triggered, one-shot conversion group will be stuck in ADC_BUSY status and must be stopped manually by calling API."], ["Basic concepts to understand ADC"], ["Basic concepts knowledge is the target to begin on AUTOSAR ADC"], ["\u00e2\u20ac\u00a2 Knowledge of queue concept (1 dimension)"], ["\u00e2\u20ac\u00a2 Able to understand how each scan mode works"], ["\u00e2\u20ac\u00a2 Able to understand how each ADC buffer type works"], ["\u00e2\u20ac\u00a2 What is hardware and software trigger type of ADC"], ["\u00e2\u20ac\u00a2 Able to understand basic behavior of 7 defined group type "], ["A few notes on AUTOSAR ADC"], ["There are notes that one must know in order to begin with AUTOSAR ADC"], ["\u00e2\u20ac\u00a2 There are two types of queue available"], ["\u00e2\u20ac\u00a2 Hardware queue: queue that is implemented by the built-in function of hardware, software will not handle/process this queue. This queue may contain both software and hardware triggered groups"], ["\u00e2\u20ac\u00a2 Software queue: queue that is implemented by software alone, software will handle this queue alone with the help of hardware function (not queue). This queue may only contain software triggered group(s)"], ["\u00e2\u20ac\u00a2 When using limit error check, only one channel can be used at a time. This may or may not be applied for other error types if supported."], ["\u00e2\u20ac\u00a2 Group configured as circular buffer type means that it will not stop until requested by user (or is pushed to queue)"], ["A few notes on AUTOSAR ADC"], ["There are notes that one must know in order to begin with AUTOSAR ADC"], ["\u00e2\u20ac\u00a2 The differences between implicitly stopped and non-implicitly stopped group must be known (one can only be stopped by calling related API Adc_DisableHardwareTrigger/Adc_StopGroupConversion while the other does not need to)"], ["\u00e2\u20ac\u00a2 AUTOSAR does not define how queue of hardware-software should work, however, when priority hardware-software is enabled it may be quite troublesome to implemented. One can follow suggestion of AUTOSAR to get a glance of how it should work."], ["Should-have knowledge for a better qualified code"], ["\u00e2\u20ac\u00a2 By understanding the basic concept of AUTOSAR ADC, one may be able to implement it. Still these knowledge must be know if one aim for the perfection"], ["\u00e2\u20ac\u00a2 The conversion time of ADC hardware is vary and may be between devices, knowledge of the maximum and minimum required time for conversion can be quite useful."], ["\u00e2\u20ac\u00a2 Accuracy of ADC hardware is vary, knowledge of such values (tolerance at one specific converted data) will always be useful in specific cases."], ["\u00e2\u20ac\u00a2 ADC contains various safety mechanisms to ensure the correctness of it, knowing how it works and what may cause the malfunction of such function are always of use."]], "table": [], "tablename": [], "tabletype": [], "subheader": []}